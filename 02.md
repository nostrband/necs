# NEC-02 Enclaved Service Announcement

Services running inside TEE may announce themselves on Nostr relays using `kind:63793` `announcement` event.

The `announcement` event SHOULD include:
- `content` field with service description
- `tee_root` tag with `tee attestation` event by the same `pubkey` (see [NEC-01](./01.md))
- `expiration` tag with timestamp matching the expiration time of the `tee_root`
- `relay` tags if the service uses relays to communicate with clients
- `r` tag with a git repo link
- `t` tag with values of `prod` or `dev`, default is `dev`, to discern production instances from dev/previews

Example:
```js
{
  "id": <event_id>,
  "created_at": <timestamp>,
  "pubkey": <service pubkey>,
  "kind": 63793,
  "content": <service description>,
  "tags": [
    ["r": "https://github.com/example/repo"],
    ["t", "prod"],
    ["relay", <service inbox relay>],
    ["tee_root", <stringified tee attestation event>]
  ]
}
```

`Announcement` events should be published to relays that specific niche clients are expected to use for discovery. They should be republished regularly to keep the `tee_root` tag valid. 

Clients SHOULD re-fetch the announcements regularly and SHOULD NOT trust the `pubkey` longer than the expiry timestamp of the most recently validated `tee_root`. 